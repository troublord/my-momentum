{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useAuth } from \"../contexts/AuthContext\";\nconst API_BASE = \"http://localhost:8080\";\nexport const useApi = () => {\n  _s();\n  const {\n    accessToken\n  } = useAuth();\n  const headers = {\n    \"Content-Type\": \"application/json\",\n    ...(accessToken ? {\n      Authorization: `Bearer ${accessToken}`\n    } : {})\n  };\n  return {\n    get: async endpoint => {\n      try {\n        const res = await fetch(`${API_BASE}${endpoint}`, {\n          headers\n        });\n        if (res.status === 401) {\n          localStorage.removeItem(\"mm_access_token\");\n          window.location.href = \"/\";\n          return null;\n        }\n        if (!res.ok) {\n          throw new Error(`API Error: ${res.statusText}`);\n        }\n        return res.json();\n      } catch (error) {\n        console.error(`GET ${endpoint} failed:`, error);\n        throw error;\n      }\n    },\n    post: async (endpoint, data) => {\n      try {\n        const res = await fetch(`${API_BASE}${endpoint}`, {\n          method: \"POST\",\n          headers,\n          body: data ? JSON.stringify(data) : undefined\n        });\n        if (res.status === 401) {\n          localStorage.removeItem(\"mm_access_token\");\n          window.location.href = \"/\";\n          return null;\n        }\n        if (!res.ok) {\n          throw new Error(`API Error: ${res.statusText}`);\n        }\n        return res.json();\n      } catch (error) {\n        console.error(`POST ${endpoint} failed:`, error);\n        throw error;\n      }\n    },\n    put: async (endpoint, data) => {\n      try {\n        const res = await fetch(`${API_BASE}${endpoint}`, {\n          method: \"PUT\",\n          headers,\n          body: data ? JSON.stringify(data) : undefined\n        });\n        if (res.status === 401) {\n          localStorage.removeItem(\"mm_access_token\");\n          window.location.href = \"/\";\n          return null;\n        }\n        if (!res.ok) {\n          throw new Error(`API Error: ${res.statusText}`);\n        }\n        return res.json();\n      } catch (error) {\n        console.error(`PUT ${endpoint} failed:`, error);\n        throw error;\n      }\n    },\n    delete: async endpoint => {\n      try {\n        const res = await fetch(`${API_BASE}${endpoint}`, {\n          method: \"DELETE\",\n          headers\n        });\n        if (res.status === 401) {\n          localStorage.removeItem(\"mm_access_token\");\n          window.location.href = \"/\";\n          return null;\n        }\n        if (!res.ok) {\n          throw new Error(`API Error: ${res.statusText}`);\n        }\n        // DELETE 可能回傳空內容\n        if (res.status === 204) return null;\n        return res.json();\n      } catch (error) {\n        console.error(`DELETE ${endpoint} failed:`, error);\n        throw error;\n      }\n    }\n  };\n};\n_s(useApi, \"H2s6cEd4nl6sbGAI8Q32tb+8gJk=\", false, function () {\n  return [useAuth];\n});","map":{"version":3,"names":["useAuth","API_BASE","useApi","_s","accessToken","headers","Authorization","get","endpoint","res","fetch","status","localStorage","removeItem","window","location","href","ok","Error","statusText","json","error","console","post","data","method","body","JSON","stringify","undefined","put","delete"],"sources":["C:/BausensLaw/MyMomentum/frontend/src/services/api.ts"],"sourcesContent":["import { useAuth } from \"../contexts/AuthContext\";\r\n\r\nconst API_BASE = \"http://localhost:8080\";\r\n\r\nexport const useApi = () => {\r\n  const { accessToken } = useAuth();\r\n\r\n  const headers: HeadersInit = {\r\n    \"Content-Type\": \"application/json\",\r\n    ...(accessToken ? { Authorization: `Bearer ${accessToken}` } : {}),\r\n  };\r\n\r\n  return {\r\n    get: async <T>(endpoint: string): Promise<T | null> => {\r\n      try {\r\n        const res = await fetch(`${API_BASE}${endpoint}`, { headers });\r\n        if (res.status === 401) {\r\n          localStorage.removeItem(\"mm_access_token\");\r\n          window.location.href = \"/\";\r\n          return null;\r\n        }\r\n        if (!res.ok) {\r\n          throw new Error(`API Error: ${res.statusText}`);\r\n        }\r\n        return res.json() as Promise<T>;\r\n      } catch (error) {\r\n        console.error(`GET ${endpoint} failed:`, error);\r\n        throw error;\r\n      }\r\n    },\r\n\r\n    post: async <T>(endpoint: string, data?: any): Promise<T | null> => {\r\n      try {\r\n        const res = await fetch(`${API_BASE}${endpoint}`, {\r\n          method: \"POST\",\r\n          headers,\r\n          body: data ? JSON.stringify(data) : undefined,\r\n        });\r\n        if (res.status === 401) {\r\n          localStorage.removeItem(\"mm_access_token\");\r\n          window.location.href = \"/\";\r\n          return null;\r\n        }\r\n        if (!res.ok) {\r\n          throw new Error(`API Error: ${res.statusText}`);\r\n        }\r\n        return res.json() as Promise<T>;\r\n      } catch (error) {\r\n        console.error(`POST ${endpoint} failed:`, error);\r\n        throw error;\r\n      }\r\n    },\r\n\r\n    put: async <T>(endpoint: string, data?: any): Promise<T | null> => {\r\n      try {\r\n        const res = await fetch(`${API_BASE}${endpoint}`, {\r\n          method: \"PUT\",\r\n          headers,\r\n          body: data ? JSON.stringify(data) : undefined,\r\n        });\r\n        if (res.status === 401) {\r\n          localStorage.removeItem(\"mm_access_token\");\r\n          window.location.href = \"/\";\r\n          return null;\r\n        }\r\n        if (!res.ok) {\r\n          throw new Error(`API Error: ${res.statusText}`);\r\n        }\r\n        return res.json() as Promise<T>;\r\n      } catch (error) {\r\n        console.error(`PUT ${endpoint} failed:`, error);\r\n        throw error;\r\n      }\r\n    },\r\n\r\n    delete: async <T>(endpoint: string): Promise<T | null> => {\r\n      try {\r\n        const res = await fetch(`${API_BASE}${endpoint}`, {\r\n          method: \"DELETE\",\r\n          headers,\r\n        });\r\n        if (res.status === 401) {\r\n          localStorage.removeItem(\"mm_access_token\");\r\n          window.location.href = \"/\";\r\n          return null;\r\n        }\r\n        if (!res.ok) {\r\n          throw new Error(`API Error: ${res.statusText}`);\r\n        }\r\n        // DELETE 可能回傳空內容\r\n        if (res.status === 204) return null;\r\n        return res.json() as Promise<T>;\r\n      } catch (error) {\r\n        console.error(`DELETE ${endpoint} failed:`, error);\r\n        throw error;\r\n      }\r\n    },\r\n  };\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}