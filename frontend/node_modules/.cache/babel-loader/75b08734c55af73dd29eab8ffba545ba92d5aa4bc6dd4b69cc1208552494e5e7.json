{"ast":null,"code":"var _jsxFileName = \"C:\\\\BausensLaw\\\\MyMomentum\\\\frontend\\\\src\\\\contexts\\\\AuthContext.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useCallback, useContext, useEffect, useMemo, useState } from \"react\";\nimport jwtDecode from \"jwt-decode\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext(undefined);\nexport const AuthProvider = ({\n  children\n}) => {\n  _s();\n  const [accessToken, setAccessTokenState] = useState(null);\n  useEffect(() => {\n    const saved = localStorage.getItem(\"mm_access_token\");\n    if (!saved) return;\n    try {\n      const decoded = jwtDecode(saved);\n      if (decoded !== null && decoded !== void 0 && decoded.exp && decoded.exp * 1000 < Date.now()) {\n        localStorage.removeItem(\"mm_access_token\");\n        return;\n      }\n      setAccessTokenState(saved);\n    } catch {\n      localStorage.removeItem(\"mm_access_token\");\n    }\n  }, []);\n  const setAccessToken = useCallback(token => {\n    setAccessTokenState(token);\n    if (token) {\n      localStorage.setItem(\"mm_access_token\", token);\n    } else {\n      localStorage.removeItem(\"mm_access_token\");\n    }\n  }, []);\n  const logout = useCallback(() => {\n    setAccessToken(null);\n  }, [setAccessToken]);\n  const value = useMemo(() => ({\n    accessToken,\n    isAuthenticated: Boolean(accessToken),\n    setAccessToken,\n    logout\n  }), [accessToken, logout, setAccessToken]);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 10\n  }, this);\n};\n_s(AuthProvider, \"qhI/ZHKdlNFqA6y+vmKP82bMe3Q=\");\n_c = AuthProvider;\nexport const useAuth = () => {\n  _s2();\n  const ctx = useContext(AuthContext);\n  if (!ctx) throw new Error(\"useAuth must be used within an AuthProvider\");\n  return ctx;\n};\n_s2(useAuth, \"/dMy7t63NXD4eYACoT93CePwGrg=\");\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useCallback","useContext","useEffect","useMemo","useState","jwtDecode","jsxDEV","_jsxDEV","AuthContext","undefined","AuthProvider","children","_s","accessToken","setAccessTokenState","saved","localStorage","getItem","decoded","exp","Date","now","removeItem","setAccessToken","token","setItem","logout","value","isAuthenticated","Boolean","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","ctx","Error","$RefreshReg$"],"sources":["C:/BausensLaw/MyMomentum/frontend/src/contexts/AuthContext.tsx"],"sourcesContent":["import React, {\r\n  createContext,\r\n  useCallback,\r\n  useContext,\r\n  useEffect,\r\n  useMemo,\r\n  useState,\r\n} from \"react\";\r\nimport jwtDecode from \"jwt-decode\";\r\n\r\ntype DecodedJwt = {\r\n  exp?: number;\r\n  [key: string]: unknown;\r\n};\r\n\r\ntype AuthContextValue = {\r\n  accessToken: string | null;\r\n  isAuthenticated: boolean;\r\n  setAccessToken: (token: string | null) => void;\r\n  logout: () => void;\r\n};\r\n\r\nconst AuthContext = createContext<AuthContextValue | undefined>(undefined);\r\n\r\nexport const AuthProvider: React.FC<{ children: React.ReactNode }> = ({\r\n  children,\r\n}) => {\r\n  const [accessToken, setAccessTokenState] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const saved = localStorage.getItem(\"mm_access_token\");\r\n    if (!saved) return;\r\n    try {\r\n      const decoded = jwtDecode<DecodedJwt>(saved);\r\n      if (decoded?.exp && decoded.exp * 1000 < Date.now()) {\r\n        localStorage.removeItem(\"mm_access_token\");\r\n        return;\r\n      }\r\n      setAccessTokenState(saved);\r\n    } catch {\r\n      localStorage.removeItem(\"mm_access_token\");\r\n    }\r\n  }, []);\r\n\r\n  const setAccessToken = useCallback((token: string | null) => {\r\n    setAccessTokenState(token);\r\n    if (token) {\r\n      localStorage.setItem(\"mm_access_token\", token);\r\n    } else {\r\n      localStorage.removeItem(\"mm_access_token\");\r\n    }\r\n  }, []);\r\n\r\n  const logout = useCallback(() => {\r\n    setAccessToken(null);\r\n  }, [setAccessToken]);\r\n\r\n  const value = useMemo<AuthContextValue>(\r\n    () => ({\r\n      accessToken,\r\n      isAuthenticated: Boolean(accessToken),\r\n      setAccessToken,\r\n      logout,\r\n    }),\r\n    [accessToken, logout, setAccessToken]\r\n  );\r\n\r\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n};\r\n\r\nexport const useAuth = (): AuthContextValue => {\r\n  const ctx = useContext(AuthContext);\r\n  if (!ctx) throw new Error(\"useAuth must be used within an AuthProvider\");\r\n  return ctx;\r\n};\r\n"],"mappings":";;;AAAA,OAAOA,KAAK,IACVC,aAAa,EACbC,WAAW,EACXC,UAAU,EACVC,SAAS,EACTC,OAAO,EACPC,QAAQ,QACH,OAAO;AACd,OAAOC,SAAS,MAAM,YAAY;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAcnC,MAAMC,WAAW,gBAAGT,aAAa,CAA+BU,SAAS,CAAC;AAE1E,OAAO,MAAMC,YAAqD,GAAGA,CAAC;EACpEC;AACF,CAAC,KAAK;EAAAC,EAAA;EACJ,MAAM,CAACC,WAAW,EAAEC,mBAAmB,CAAC,GAAGV,QAAQ,CAAgB,IAAI,CAAC;EAExEF,SAAS,CAAC,MAAM;IACd,MAAMa,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,iBAAiB,CAAC;IACrD,IAAI,CAACF,KAAK,EAAE;IACZ,IAAI;MACF,MAAMG,OAAO,GAAGb,SAAS,CAAaU,KAAK,CAAC;MAC5C,IAAIG,OAAO,aAAPA,OAAO,eAAPA,OAAO,CAAEC,GAAG,IAAID,OAAO,CAACC,GAAG,GAAG,IAAI,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;QACnDL,YAAY,CAACM,UAAU,CAAC,iBAAiB,CAAC;QAC1C;MACF;MACAR,mBAAmB,CAACC,KAAK,CAAC;IAC5B,CAAC,CAAC,MAAM;MACNC,YAAY,CAACM,UAAU,CAAC,iBAAiB,CAAC;IAC5C;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,cAAc,GAAGvB,WAAW,CAAEwB,KAAoB,IAAK;IAC3DV,mBAAmB,CAACU,KAAK,CAAC;IAC1B,IAAIA,KAAK,EAAE;MACTR,YAAY,CAACS,OAAO,CAAC,iBAAiB,EAAED,KAAK,CAAC;IAChD,CAAC,MAAM;MACLR,YAAY,CAACM,UAAU,CAAC,iBAAiB,CAAC;IAC5C;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMI,MAAM,GAAG1B,WAAW,CAAC,MAAM;IAC/BuB,cAAc,CAAC,IAAI,CAAC;EACtB,CAAC,EAAE,CAACA,cAAc,CAAC,CAAC;EAEpB,MAAMI,KAAK,GAAGxB,OAAO,CACnB,OAAO;IACLU,WAAW;IACXe,eAAe,EAAEC,OAAO,CAAChB,WAAW,CAAC;IACrCU,cAAc;IACdG;EACF,CAAC,CAAC,EACF,CAACb,WAAW,EAAEa,MAAM,EAAEH,cAAc,CACtC,CAAC;EAED,oBAAOhB,OAAA,CAACC,WAAW,CAACsB,QAAQ;IAACH,KAAK,EAAEA,KAAM;IAAAhB,QAAA,EAAEA;EAAQ;IAAAoB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAuB,CAAC;AAC9E,CAAC;AAACtB,EAAA,CA5CWF,YAAqD;AAAAyB,EAAA,GAArDzB,YAAqD;AA8ClE,OAAO,MAAM0B,OAAO,GAAGA,CAAA,KAAwB;EAAAC,GAAA;EAC7C,MAAMC,GAAG,GAAGrC,UAAU,CAACO,WAAW,CAAC;EACnC,IAAI,CAAC8B,GAAG,EAAE,MAAM,IAAIC,KAAK,CAAC,6CAA6C,CAAC;EACxE,OAAOD,GAAG;AACZ,CAAC;AAACD,GAAA,CAJWD,OAAO;AAAA,IAAAD,EAAA;AAAAK,YAAA,CAAAL,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}